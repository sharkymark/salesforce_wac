version: 0.1
workspace:
  type: "kubernetes"
  spec:
    image: index.docker.io/marktmilligan/salesforce:latest
    container-based-vm: false
    cpu: 4
    memory: 8 
    disk: 10
    labels:    
      com.coder.custom.chargeback: "salesforce_team"
  configure:
    start:
      - name: install 8 vscode extensions (vsix) from image for development using the Salesforce.com API
        directory: /home/coder/
        shell: /bin/bash
        command: |
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforce.salesforce-vscode-slds-1.4.2.vsix /vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforce.salesforcedx-vscode-apex-51.10.0.vsix 
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforcedx-vscode-apex-debugger-51.10.0.vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforcedx-vscode-apex-replay-debugger-51.10.0.vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforce.salesforcedx-vscode-core-51.10.0.vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforce.salesforcedx-vscode-lightning-51.10.0.vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforce.salesforcedx-vscode-lwc-51.10.0.vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/salesforce.salesforcedx-vscode-visualforce-51.10.0.vsix                
      - name: install vim editor
        directory: /home/coder/
        shell: /bin/bash
        command: sudo apt install vim                          
  devURLs:
    - name: testapp
      port: 3000
      scheme: http
      access: org